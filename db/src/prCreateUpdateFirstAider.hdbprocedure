PROCEDURE "prCreateUpdateFirstAider" (
    
    IN FISID	INTEGER,     --  Unique id
    IN INCID	INTEGER,     --	Incident Id
    IN IPLID    INTEGER,     -- People Involved Id
    -- IN FADNM    NVARCHAR(250),  -- First Aiders Name
    IN UNQID    NVARCHAR(20),      --  Unique id  
    IN TRTRD    NVARCHAR(5000), -- What was the treatment rendered?
    IN ARRAG    NVARCHAR(5000), -- Please describe what happened and what is the arrangement made for the ill / injured person?
    IN CSTM1	NVARCHAR(1000),    -- Custom Filed 1
    IN CSTM2	NVARCHAR(1000),    -- Custom Filed 2
    IN CSTM3	NVARCHAR(5000)    -- Custom Filed 3
)

   LANGUAGE SQLSCRIPT
   SQL SECURITY INVOKER 
   --READS SQL DATA
   AS 
BEGIN

   IF :FISID = 0 THEN 
   
   INSERT INTO "INC_T_FISAL" (INCID,IPLID,UNQID,TRTRD,ARRAG,CSTM1,CSTM2,CSTM3,ISDEL,CRTBY,CRTDT,CRTTM,CHNBY,CHNDT,CHNTM) 
   VALUES (INCID,IPLID,UNQID,TRTRD,ARRAG,CSTM1,CSTM2,CSTM3,'0',SESSION_USER,CURRENT_DATE,CURRENT_TIME,SESSION_USER,CURRENT_DATE,CURRENT_TIME);
   
   ELSE
   
   UPDATE "INC_T_FISAL" SET UNQID=:UNQID, TRTRD=:TRTRD, ARRAG=:ARRAG,CSTM1=:CSTM1,CSTM2=:CSTM2,CSTM3=:CSTM3,
   CHNBY=SESSION_USER, CHNDT=CURRENT_DATE, CHNTM=CURRENT_TIME
   WHERE FISID=:FISID AND INCID=:INCID AND ISDEL = '0';
   
   END IF;
   
END